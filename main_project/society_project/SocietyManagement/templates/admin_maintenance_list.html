<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Maintenance | SocietyHub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%237c3aed'/%3E%3Ctext x='50' y='65' font-size='55' text-anchor='middle' fill='white'%3EğŸ¡%3C/text%3E%3C/svg%3E">

</head>

<body class="min-h-screen bg-gradient-to-tr from-blue-100 via-indigo-100 to-purple-100">

<!-- Navbar -->
<nav class="flex flex-wrap justify-between items-center bg-white shadow px-6 md:px-10 py-4">
    <h1 class="text-2xl md:text-3xl font-extrabold text-indigo-700">
        ğŸ’° Maintenance Management
    </h1>

    <a href="{% url 'admin_dashboard' %}"
       class="mt-3 md:mt-0 bg-gray-800 hover:bg-black text-white px-5 py-2 rounded-lg shadow transition">
       â¬… Back to Dashboard
    </a>
</nav>

<div class="max-w-7xl mx-auto p-5 md:p-8">

    <div class="flex flex-wrap justify-between items-center mb-6">
        <h2 class="text-3xl md:text-4xl font-bold text-indigo-700 drop-shadow">
            Maintenance Records
        </h2>

        <a href="{% url 'add_maintenance' %}"
           class="mt-3 md:mt-0 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 font-semibold rounded-xl shadow-lg transition">
           â• Add Maintenance
        </a>
    </div>

    <!-- Card Container -->
    <div class="bg-white rounded-3xl shadow-2xl border border-indigo-200">

        <!-- Table Wrapper (Responsive Scroll) -->
        <div class="overflow-x-auto">
            <table class="min-w-full text-center">
                <thead>
                    <tr class="bg-indigo-50 text-gray-800 text-sm md:text-base">
                        <th class="px-4 py-3">Member</th>
                        <th class="px-4 py-3">Title</th>
                        <th class="px-4 py-3">Description</th>
                        <th class="px-4 py-3">Month</th>
                        <th class="px-4 py-3">Year</th>
                        <th class="px-4 py-3">Amount</th>
                        <th class="px-4 py-3">Status</th>
                        <th class="px-4 py-3">Created At</th>
                        <th class="px-4 py-3">Actions</th>
                    </tr>
                </thead>

                <tbody class="text-gray-700">

                {% for m in maintenances %}
                <tr class="border-b hover:bg-indigo-50 transition">

                    <td class="px-4 py-3 font-semibold">
                        {{ m.user.username }}
                    </td>

                    <td class="px-4 py-3">
                        {{ m.title }}
                    </td>

                    <td class="px-4 py-3">
                        {{ m.description }}
                    </td>

                    <td class="px-4 py-3">
                        {{ m.month }}
                    </td>

                    <td class="px-4 py-3">
                        {{ m.year }}
                    </td>

                    <td class="px-4 py-3 font-semibold text-indigo-700">
                        â‚¹ {{ m.amount }}
                    </td>

                    <td class="px-4 py-3">
                        {% if m.status == "Pending" %}
                        <span class="bg-yellow-500 text-white px-4 py-1 rounded-full shadow">
                            Pending
                        </span>

                        {% elif m.status == "Paid" %}
                        <span class="bg-green-600 text-white px-4 py-1 rounded-full shadow">
                            Paid
                        </span>

                        {% else %}
                        <span class="bg-red-600 text-white px-4 py-1 rounded-full shadow">
                            Overdue
                        </span>
                        {% endif %}
                    </td>

                    <td class="px-4 py-3">
                        {{ m.created_at|date:"d M, Y H:i" }}
                    </td>

                    <td class="px-4 py-3 flex flex-wrap gap-2 justify-center">

                        <a href="{% url 'update_maintenance' m.id %}"
                           class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow transition">
                           âœ Update
                        </a>

                        <a href="{% url 'delete_maintenance' m.id %}"
                           onclick="return confirm('Are you sure you want to delete this maintenance?')"
                           class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow transition">
                           ğŸ—‘ Delete
                        </a>

                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="9" class="px-4 py-6 text-lg text-gray-700">
                        ğŸ˜• No Maintenance Found
                    </td>
                </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

    </div>
</div>

</body>
</html>
