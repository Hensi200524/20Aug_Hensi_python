<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Complaints | SocietyHub</title>
<script src="https://cdn.tailwindcss.com"></script>

<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%237c3aed'/%3E%3Ctext x='50' y='65' font-size='55' text-anchor='middle' fill='white'%3EðŸ¡%3C/text%3E%3C/svg%3E">

</head>
<body class="bg-gray-100 min-h-screen p-8">

<h1 class="text-4xl font-bold text-purple-700 mb-6">âš  Complaints Management</h1>

<table class="min-w-full bg-white shadow rounded-lg overflow-hidden">
    <thead class="bg-purple-700 text-white">
        <tr>
            <th class="px-4 py-3">Member</th>
            <th class="px-4 py-3">Title</th>
            <th class="px-4 py-3">Description</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Admin Reply</th>
            <th class="px-4 py-3">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for c in complaints %}
        <tr class="border-b hover:bg-purple-50">
            <td class="px-4 py-3">{{ c.user.username }}</td>
            <td class="px-4 py-3">{{ c.title }}</td>
            <td class="px-4 py-3">{{ c.description }}</td>
            <td class="px-4 py-3">{{ c.status }}</td>
            <td class="px-4 py-3">{{ c.admin_reply|default:"--" }}</td>

            <td class="px-4 py-3 flex gap-2">

                <!-- Update Button -->
                <a href="{% url 'update_complaint' c.id %}"
                   class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded">
                   Update
                </a>

                <!-- Delete Button -->
                <form action="{% url 'delete_complaint' c.id %}" method="POST"
                      onsubmit="return confirm('Are you sure you want to delete this complaint?');">
                    {% csrf_token %}
                    <button type="submit"
                            class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded">
                        Delete
                    </button>
                </form>

            </td>
        </tr>

        {% empty %}
        <tr>
            <td colspan="6" class="px-4 py-6 text-center text-gray-700">
                ðŸ˜• No complaints found.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>
