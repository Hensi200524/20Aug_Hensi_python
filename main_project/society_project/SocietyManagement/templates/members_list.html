<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Members | SocietyHub</title>
<script src="https://cdn.tailwindcss.com"></script>

<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%237c3aed'/%3E%3Ctext x='50' y='65' font-size='55' text-anchor='middle' fill='white'%3EğŸ¡%3C/text%3E%3C/svg%3E">

</head>

<body class="min-h-screen bg-gradient-to-tr from-purple-200 via-pink-100 to-yellow-100">

<div class="max-w-6xl mx-auto p-8">

    <div class="flex justify-between items-center mb-6">

        <!-- FILTER BUTTONS -->
<div class="flex gap-3 mb-5">

    <a href="{% url 'members_list' %}?filter=all"
       class="px-4 py-2 rounded-lg text-white 
       {% if filter == 'all' %}bg-purple-700{% else %}bg-gray-500{% endif %}">
        All
    </a>

    <a href="{% url 'members_list' %}?filter=pending"
       class="px-4 py-2 rounded-lg text-white 
       {% if filter == 'pending' %}bg-yellow-600{% else %}bg-gray-500{% endif %}">
        Pending
    </a>

    <a href="{% url 'members_list' %}?filter=approved"
       class="px-4 py-2 rounded-lg text-white 
       {% if filter == 'approved' %}bg-green-600{% else %}bg-gray-500{% endif %}">
        Approved
    </a>

    <a href="{% url 'members_list' %}?filter=rejected"
       class="px-4 py-2 rounded-lg text-white 
       {% if filter == 'rejected' %}bg-red-600{% else %}bg-gray-500{% endif %}">
        Rejected
    </a>

</div>

        <div>
            <h1 class="text-4xl font-extrabold text-purple-700 drop-shadow">
                ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Members List
            </h1>
            <p class="text-gray-600">Manage Society Members</p>
        </div>

        <a href="{% url 'admin_dashboard' %}" 
           class="bg-gray-700 hover:bg-black text-white px-5 py-2 rounded-lg shadow">
            â¬… Back to Dashboard
        </a>
    </div>

    <div class="bg-white shadow-2xl rounded-2xl overflow-hidden border border-purple-300">

        <table class="min-w-full">
            <thead class="bg-purple-700 text-white text-lg">
                <tr>
                    <th class="px-4 py-3">Username</th>
                    <th class="px-4 py-3">Email</th>
                    <th class="px-4 py-3">Phone</th>
                    <th class="px-4 py-3">House</th>
                    <th class="px-4 py-3">Actions</th>
                </tr>
            </thead>

            <tbody>

            {% for user in users %}
            <tr class="text-center border-b hover:bg-purple-50 transition">

                <td class="px-4 py-3 font-semibold text-gray-800">
                    {{ user.username }}
                </td>

                <td class="px-4 py-3">{{ user.email }}</td>
                <td class="px-4 py-3">{{ user.phone }}</td>
                <td class="px-4 py-3">{{ user.house }}</td>

                <!-- ACTIONS -->
                <td class="px-4 py-3 space-x-2">

                    <a href="{% url 'edit_member' user.id %}"
                       class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded shadow">
                       âœ Edit
                    </a>

                    <a href="{% url 'delete_member' user.id %}"
                       class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded shadow"
                       onclick="return confirm('Are you sure you want to delete this member?');">
                       ğŸ—‘ Delete
                    </a>

                     <!-- Approve/Reject Buttons for Pending Users -->
    {% if not user.is_member_approved %}
        <a href="{% url 'approve_member' user.id %}"
           class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded shadow">
           âœ… Approve
        </a>

        <a href="{% url 'reject_member' user.id %}"
           class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded shadow">
           âŒ Reject
        </a>
    {% endif %}


                </td>

            </tr>

            {% empty %}
            <tr>
                <td colspan="5" class="px-4 py-6 text-center text-gray-700 text-lg">
                    ğŸ˜• No Members Found
                </td>
            </tr>
            {% endfor %}

            </tbody>
        </table>

    </div>

</div>

</body>
</html>
